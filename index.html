<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
  <title>Delete External Consult Transfers</title>

  <!-- Bootstrap core CSS -->
  <link href="./assets/dist/css/bootstrap.min.css" rel="stylesheet" />

  <style>
    .bd-placeholder-img {
      font-size: 1.125rem;
      text-anchor: middle;
      -webkit-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
      user-select: none;
    }

    @media (min-width: 768px) {
      .bd-placeholder-img-lg {
        font-size: 3.5rem;
      }
    }
  </style>
  <!-- Custom styles for this template -->
  <link href="index.css" rel="stylesheet" />
</head>

<body class="text-center">
  <form id="loginForm" class="form-signin">
    <img class="mb-4" src="./assets/brand/genesys.png" alt="" />
    <h1 class="h3 mb-3 font-weight-normal">Delete Consult Transfers Recordings</h1>
    <label for="exampleFormControlSelect1">Select your environment</label>
    <select class="form-control mb-3" id="environment">
      <option value="apne2.pure.cloud">Asia Pacific (Seoul)</option>
      <option value="mypurecloud.com.au">Asia Pacific (Sydney)</option>
      <option value="mypurecloud.jp">Asia Pacific (Tokyo)</option>
      <option value="cac1.pure.cloud">Canada (Canada Central)</option>
      <option value="mypurecloud.de">EU (Frankfurt)</option>
      <option value="mypurecloud.ie" selected>EU (Ireland)</option>
      <option value="euw2.pure.cloud">EU (London)</option>
      <option value="mypurecloud.com">US East (N. Virginia)</option>
      <option value="usw2.pure.cloud">US West (Oregon)</option>
    </select>

    <button class="btn btn-lg btn-primary btn-block" onclick="login()">
      Login
    </button>
    <p class="mt-5 mb-3 text-muted">&copy; Genesys</p>
  </form>

  <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
  <script type="text/javascript">
    const clientId = "ab3380de-b472-4b76-a6e1-71c385a9cc85"; // No need to change this as this is a cross-region OAuth client unless you run this website using a different URL
    const redirectUri = "https://localhost/recordings.html"; // If running locally, use your own URL (e.g. https://localhost/index.html)

    let results = {};

    function login() {
      let url = new URL(window.location.href);
      let environment = $("#environment").val();

      if (url.href.includes('access_token')) {
        var token = url.href.split('access_token=')[1].split('&expires_in')[0];
        console.log('Extracted token: ' + token);
        localStorage.setItem('access_token', token);
        localStorage.setItem('environment', environment)
        window.location.href = redirectUri;
      } else {
        window.location.href = `https://login.${environment}/oauth/authorize?client_id=${clientId}&redirect_uri=${redirectUri}&response_type=token`;
      }
    }
  </script>
</body>

</html>